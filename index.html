<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Glen Track</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0B1220" id="metaThemeColor" />
  <link rel="manifest" href="manifest.json?v=2026.03.01" />
  <link rel="apple-touch-icon" href="apple-touch-icon.png?v=2026.03.01" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Glen Track" />

  <link rel="stylesheet" href="app.css?v=2026.03.01" />
  <script defer src="app.js?v=2026.03.01"></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <img class="brandIcon" src="icon-192.png" alt="Glen Track icon" />
      <div class="brandText">
        <div class="brandName">Glen Track</div>
        <div class="brandTag">Clean execution. Close the day.</div>
      </div>
    </div>

    <div class="topActions">
      <button class="chip" id="btnPrevDay" aria-label="Previous day">‹</button>
      <button class="chip chipWide" id="btnPickDay" aria-label="Pick day">
        <span id="uiDateLabel">Today</span>
      </button>
      <button class="chip" id="btnNextDay" aria-label="Next day">›</button>
    </div>
  </header>

  <main class="container">
    <!-- TODAY -->
    <section class="screen active" data-screen="today" aria-label="Today">
      <div class="card heroCard">
        <div class="heroHead">
          <div>
            <div class="h1">Today</div>
            <div class="sub" id="uiStatusLine">Status: In Progress</div>
          </div>
          <div class="statusPill" id="uiStatusPill">In Progress</div>
        </div>

        <div class="todayTop">
          <div class="ringWrap" aria-label="Momentum ring">
            <svg class="ring" viewBox="0 0 120 120" role="img">
              <defs>
                <linearGradient id="gtGrad" x1="0" y1="0" x2="1" y2="1">
                  <stop offset="0%" stop-color="rgba(183,255,74,1)"/>
                  <stop offset="100%" stop-color="rgba(43,190,255,1)"/>
                </linearGradient>
              </defs>
              <circle class="ringBg" cx="60" cy="60" r="48"></circle>
              <circle class="ringFg" id="uiRing" cx="60" cy="60" r="48"></circle>
            </svg>
            <div class="ringCenter">
              <div class="ringBig" id="uiRingPct">0%</div>
              <div class="ringSmall">Momentum</div>
            </div>
          </div>

          <div class="todayMetrics">
            <div class="metricBlock">
              <div class="metricLabel">Calories</div>
              <div class="metricValue" id="uiCals">—</div>
              <div class="metricHint" id="uiCalsHint">—</div>
              <div class="bar">
                <div class="barFill" id="barCals"></div>
              </div>
            </div>

            <div class="metricBlock">
              <div class="metricLabel">Protein</div>
              <div class="metricValue" id="uiProtein">—</div>
              <div class="metricHint" id="uiProteinHint">—</div>
              <div class="bar">
                <div class="barFill" id="barProtein"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="miniRow">
          <div class="miniItem"><span class="miniK">Carbs</span><span class="miniV" id="uiCarbs">—</span></div>
          <div class="miniItem"><span class="miniK">Fat</span><span class="miniV" id="uiFat">—</span></div>
        </div>

        <div class="divider"></div>

        <div class="rowList">
          <button class="rowBtn" id="btnGoFood">
            <span class="rowLeft">
              <span class="rowTitle">Food</span>
              <span class="rowSub" id="uiFoodSub">Not logged</span>
            </span>
            <span class="rowRight" id="uiFoodMark">—</span>
          </button>

          <button class="rowBtn" id="btnGoWorkouts">
            <span class="rowLeft">
              <span class="rowTitle">Workout</span>
              <span class="rowSub" id="uiWorkoutSub">Not logged</span>
            </span>
            <span class="rowRight" id="uiWorkoutMark">—</span>
          </button>

          <button class="rowBtn" id="btnWeighIn">
            <span class="rowLeft">
              <span class="rowTitle">Weigh-in</span>
              <span class="rowSub" id="uiWeighInSub">Weekly check</span>
            </span>
            <span class="rowRight" id="uiWeighInMark">—</span>
          </button>
        </div>

        <div class="divider"></div>

        <div class="ctaRow">
          <button class="btn ghost" id="btnUndoCloseDay" disabled>Unclose</button>
          <button class="btn primary" id="btnCloseDay" disabled>Close Today</button>
        </div>

        <div class="subtle" id="uiCloseHint">Log food OR a workout OR a weigh-in to enable Close Today.</div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">This Week</div>
            <div class="sub">Momentum snapshot</div>
          </div>
        </div>
        <div class="miniGrid">
          <div class="miniCard">
            <div class="miniBig" id="uiClosedDays">—</div>
            <div class="miniSmall">Closed days</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiWorkoutsWeek">—</div>
            <div class="miniSmall">Workouts</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiAvgCals">—</div>
            <div class="miniSmall">Avg calories</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiAvgProtein">—</div>
            <div class="miniSmall">Avg protein</div>
          </div>
        </div>
        <div class="divider"></div>
        <div class="streakRow">
          <div>
            <div class="h2">Streak</div>
            <div class="sub">Consecutive closed days</div>
          </div>
          <div class="streakVal" id="uiStreak">0</div>
        </div>
      </div>
    </section>

    <!-- FOOD -->
    <section class="screen" data-screen="food" aria-label="Food">
      <div class="screenHead">
        <div>
          <div class="h1">Food</div>
          <div class="sub" id="uiFoodDateSub">Meals for selected day</div>
        </div>
        <button class="btn ghost" id="btnFoodLibrary">Library</button>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Daily totals</div>
            <div class="sub">Logged only</div>
          </div>
          <button class="btn ghost" id="btnCopyPrevDay">Copy yesterday</button>
        </div>

        <div class="miniRow">
          <div class="miniItem"><span class="miniK">Calories</span><span class="miniV" id="uiFoodTotCals">—</span></div>
          <div class="miniItem"><span class="miniK">Protein</span><span class="miniV" id="uiFoodTotP">—</span></div>
          <div class="miniItem"><span class="miniK">Carbs</span><span class="miniV" id="uiFoodTotC">—</span></div>
          <div class="miniItem"><span class="miniK">Fat</span><span class="miniV" id="uiFoodTotF">—</span></div>
        </div>
      </div>

      <div id="mealList"></div>
    </section>

    <!-- WORKOUTS -->
    <section class="screen" data-screen="workouts" aria-label="Workouts">
      <div class="screenHead">
        <div>
          <div class="h1">Workouts</div>
          <div class="sub" id="uiWorkoutDateSub">Plan or log for selected day</div>
        </div>
        <button class="btn ghost" id="btnWorkoutTemplates">Templates</button>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Selected day</div>
            <div class="sub" id="uiWorkoutStatus">No workout planned</div>
          </div>
          <button class="btn" id="btnPlanWorkout">Plan</button>
        </div>

        <div id="workoutEditor" class="workoutEditor hidden">
          <div class="divider"></div>

          <div class="workoutTopRow">
            <div class="field compact">
              <span>Template</span>
              <select id="woTemplatePick"></select>
            </div>

            <div class="field compact">
              <span>Rest timer (sec)</span>
              <input id="woRestSec" type="number" inputmode="numeric" step="5" placeholder="90" />
            </div>
          </div>

          <div class="divider"></div>

          <div id="exerciseEditor"></div>

          <div class="row">
            <button class="btn ghost" id="btnAddExercise">Add exercise</button>
            <button class="btn danger ghost" id="btnDeleteWorkout">Delete</button>
            <button class="btn primary" id="btnSaveWorkoutLog">Save</button>
          </div>

          <div class="divider"></div>

          <div class="row">
            <button class="btn ghost" id="btnStartRest">Start Rest</button>
            <div class="timerPill" id="uiRestTimer">—</div>
            <button class="btn ghost" id="btnStopRest">Stop</button>
          </div>

          <div class="divider"></div>

          <div class="row">
            <button class="btn ghost" id="btnMarkWorkoutComplete">Mark Complete</button>
            <button class="btn ghost" id="btnUndoWorkoutComplete" disabled>Undo Complete</button>
          </div>

          <div class="subtle">PRs auto-update when you save.</div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">History</div>
            <div class="sub">Recent completed workouts</div>
          </div>
        </div>
        <div id="workoutHistory" class="list"></div>
      </div>
    </section>

    <!-- CALENDAR -->
    <section class="screen" data-screen="calendar" aria-label="Calendar">
      <div class="screenHead calHead">
        <div class="calTitleRow">
          <div>
            <div class="h1">Calendar</div>
            <div class="sub" id="uiCalTitle">—</div>
          </div>
          <div class="calBtns">
            <button class="btn ghost" id="btnCalPrev" aria-label="Previous month">‹</button>
            <button class="btn ghost" id="btnCalToday" aria-label="Jump to today">Today</button>
            <button class="btn ghost" id="btnCalNext" aria-label="Next month">›</button>
          </div>
        </div>
      </div>

      <div class="card flatCard">
        <div class="calGrid" id="calGrid"></div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Selected day</div>
            <div class="sub" id="uiCalSelected">Tap a day</div>
          </div>
          <button class="btn" id="btnCalGoDay" disabled>Open</button>
        </div>

        <div class="calPreviewRow" id="calPreviewRow">
          <div class="previewChip" id="pvFood">Food: —</div>
          <div class="previewChip" id="pvWorkout">Workout: —</div>
          <div class="previewChip" id="pvClosed">Closed: —</div>
        </div>
      </div>
    </section>

    <!-- STATS -->
    <section class="screen" data-screen="analytics" aria-label="Analytics">
      <div class="screenHead">
        <div>
          <div class="h1">Stats</div>
          <div class="sub">Signal over noise</div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Settings</div>
            <div class="sub">Targets</div>
          </div>
          <button class="btn" id="btnSaveSettings">Save</button>
        </div>

        <div class="formGrid">
          <label class="field">
            <span>Daily calorie target</span>
            <input id="setCals" type="number" inputmode="numeric" step="1" />
          </label>
          <label class="field">
            <span>Daily protein target (g)</span>
            <input id="setProtein" type="number" inputmode="numeric" step="1" />
          </label>
        </div>

        <div class="divider"></div>

        <div class="row">
          <button class="btn danger ghost" id="btnReset">Reset all data</button>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">PRs</div>
            <div class="sub">Best set per exercise</div>
          </div>
        </div>
        <div id="prList" class="list"></div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Weigh-ins</div>
            <div class="sub">Weekly points</div>
          </div>
          <button class="btn" id="btnLogWeigh">Log</button>
        </div>
        <div id="weighList" class="list"></div>
      </div>
    </section>
  </main>

  <!-- Bottom nav -->
  <nav class="bottomNav" aria-label="Bottom navigation">
    <div class="bottomNavInner">
      <button class="navItem active" data-nav="today" aria-label="Today">
        <span class="navIcon">
          <svg viewBox="0 0 24 24"><path d="M4 4h7v7H4V4zm9 0h7v7h-7V4zM4 13h7v7H4v-7zm9 5h7v2h-7v-2zm0-5h7v3h-7v-3z"/></svg>
        </span>
        <span class="navLabel">Today</span>
      </button>

      <button class="navItem" data-nav="food" aria-label="Food">
        <span class="navIcon">
          <svg viewBox="0 0 24 24"><path d="M7 2c1 2 1 4 0 6v14H5V8C4 6 4 4 5 2h2zm6 0c1 2 1 4 0 6v14h-2V8c-1-2-1-4 0-6h2zm6 3c1 0 2 1 2 2v5c0 2-1 3-3 3h-1v7h-2V2h4z"/></svg>
        </span>
        <span class="navLabel">Food</span>
      </button>

      <button class="navItem" data-nav="workouts" aria-label="Workouts">
        <span class="navIcon">
          <svg viewBox="0 0 24 24"><path d="M3 10h2V7h2v10H5v-3H3v-4zm16-3h2v3h2v4h-2v3h-2V7zM7 11h10v2H7v-2z"/></svg>
        </span>
        <span class="navLabel">Workouts</span>
      </button>

      <button class="navItem" data-nav="calendar" aria-label="Calendar">
        <span class="navIcon">
          <svg viewBox="0 0 24 24"><path d="M7 2h2v2h6V2h2v2h3v18H4V4h3V2zm13 6H4v12h16V8z"/></svg>
        </span>
        <span class="navLabel">Calendar</span>
      </button>

      <button class="navItem" data-nav="analytics" aria-label="Stats">
        <span class="navIcon">
          <svg viewBox="0 0 24 24"><path d="M4 19h16v2H4v-2zM6 10h3v7H6v-7zm5-4h3v11h-3V6zm5 7h3v4h-3v-4z"/></svg>
        </span>
        <span class="navLabel">Stats</span>
      </button>
    </div>
  </nav>

  <!-- Modal -->
  <div class="modalOverlay hidden" id="modalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">Modal</div>
        <button class="iconBtn" id="modalClose" aria-label="Close">✕</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
      <div class="modalFoot" id="modalFoot"></div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast hidden" id="toast"><span id="toastMsg">Updated ✓</span><button class="toastBtn" id="toastBtn">Undo</button></div>

  <!-- Launch Overlay -->
  <div id="launchOverlay" class="launchOverlay" aria-hidden="true">
    <div class="launchStack">
      <div class="launchIconWrap">
        <img class="launchIcon" src="icon-192.png" alt="Glen Track" />
      </div>
      <div class="launchTitle">Glen Track</div>
      <div class="launchSub">Clean execution. Close the day.</div>
    </div>
  </div>
</body>
</html>