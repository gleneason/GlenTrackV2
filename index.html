<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Glen Track</title>

  <!-- PWA -->
  <meta name="theme-color" content="#0B1220" />
  <link rel="manifest" href="./manifest.json?v=3" />
  <link rel="apple-touch-icon" href="./apple-touch-icon.png?v=3" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Glen Track" />

  <!-- Styles / App (cache-busted) -->
  <link rel="stylesheet" href="./app.css?v=3" />
  <script defer src="./app.js?v=3"></script>
</head>

<body>
  <header class="topbar">
    <div class="brand">
      <img class="brandIcon" src="./icon-192.png?v=3" alt="Glen Track icon" />
      <div class="brandText">
        <div class="brandName">Glen Track</div>
        <div class="brandTag">Clean execution. Close the day.</div>
      </div>
    </div>

    <div class="topActions">
      <button class="chip" id="btnPrevDay" aria-label="Previous day">‹</button>
      <button class="chip chipWide" id="btnPickDay" aria-label="Pick day">
        <span id="uiDateLabel">Today</span>
      </button>
      <button class="chip" id="btnNextDay" aria-label="Next day">›</button>
    </div>
  </header>

  <main class="container">
    <!-- TODAY -->
    <section class="screen active" data-screen="today" aria-label="Today">
      <div class="card heroCard">
        <div class="heroHead">
          <div>
            <div class="h1">Today</div>
            <div class="sub" id="uiStatusLine">Status: In Progress</div>
          </div>
          <div class="statusPill" id="uiStatusPill">In Progress</div>
        </div>

        <div class="metricBlock">
          <div class="metricLabel">Calories</div>
          <div class="metricValue" id="uiCals">—</div>
          <div class="metricHint" id="uiCalsHint">—</div>
        </div>

        <div class="metricBlock">
          <div class="metricLabel">Protein</div>
          <div class="metricValue" id="uiProtein">—</div>
          <div class="metricHint" id="uiProteinHint">—</div>
        </div>

        <div class="miniRow">
          <div class="miniItem"><span class="miniK">Carbs</span><span class="miniV" id="uiCarbs">—</span></div>
          <div class="miniItem"><span class="miniK">Fat</span><span class="miniV" id="uiFat">—</span></div>
        </div>

        <div class="divider"></div>

        <div class="rowList">
          <button class="rowBtn" id="btnGoFood">
            <span class="rowLeft">
              <span class="rowTitle">Food</span>
              <span class="rowSub" id="uiFoodSub">Not logged</span>
            </span>
            <span class="rowRight" id="uiFoodMark">—</span>
          </button>

          <button class="rowBtn" id="btnGoWorkouts">
            <span class="rowLeft">
              <span class="rowTitle">Workout</span>
              <span class="rowSub" id="uiWorkoutSub">Not logged</span>
            </span>
            <span class="rowRight" id="uiWorkoutMark">—</span>
          </button>

          <button class="rowBtn" id="btnWeighIn">
            <span class="rowLeft">
              <span class="rowTitle">Weekly weigh-in</span>
              <span class="rowSub" id="uiWeighInSub">Weekly only</span>
            </span>
            <span class="rowRight" id="uiWeighInMark">—</span>
          </button>
        </div>

        <div class="divider"></div>

        <div class="ctaRow">
          <button class="btn ghost" id="btnQuickLog">Quick Log</button>
          <button class="btn primary" id="btnCloseDay" disabled>Close Today</button>
        </div>

        <div class="subtle" id="uiCloseHint">Log food or a workout to enable Close Today.</div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">This Week</div>
            <div class="sub">Momentum snapshot</div>
          </div>
        </div>
        <div class="miniGrid">
          <div class="miniCard">
            <div class="miniBig" id="uiClosedDays">—</div>
            <div class="miniSmall">Closed days</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiWorkoutsWeek">—</div>
            <div class="miniSmall">Workouts</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiAvgCals">—</div>
            <div class="miniSmall">Avg calories</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="uiAvgProtein">—</div>
            <div class="miniSmall">Avg protein</div>
          </div>
        </div>
        <div class="divider"></div>
        <div class="streakRow">
          <div>
            <div class="h2">Streak</div>
            <div class="sub">Consecutive closed days</div>
          </div>
          <div class="streakVal" id="uiStreak">0</div>
        </div>
      </div>
    </section>

    <!-- FOOD -->
    <section class="screen" data-screen="food" aria-label="Food">
      <div class="screenHead">
        <div>
          <div class="h1">Food</div>
          <div class="sub" id="uiFoodDateSub">Meals for selected day</div>
        </div>
        <button class="btn ghost" id="btnFoodLibrary">Library</button>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Daily totals</div>
            <div class="sub" id="uiFoodTotalsHint">Logged only (planned doesn’t count)</div>
          </div>
          <button class="btn ghost" id="btnCopyPrevDay">Copy yesterday</button>
        </div>

        <div class="miniRow">
          <div class="miniItem"><span class="miniK">Calories</span><span class="miniV" id="uiFoodTotCals">—</span></div>
          <div class="miniItem"><span class="miniK">Protein</span><span class="miniV" id="uiFoodTotP">—</span></div>
          <div class="miniItem"><span class="miniK">Carbs</span><span class="miniV" id="uiFoodTotC">—</span></div>
          <div class="miniItem"><span class="miniK">Fat</span><span class="miniV" id="uiFoodTotF">—</span></div>
        </div>
      </div>

      <div id="mealList"></div>
    </section>

    <!-- WORKOUTS -->
    <section class="screen" data-screen="workouts" aria-label="Workouts">
      <div class="screenHead">
        <div>
          <div class="h1">Workouts</div>
          <div class="sub" id="uiWorkoutDateSub">Plan or log for selected day</div>
        </div>
        <button class="btn ghost" id="btnTemplates">Templates</button>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Selected day</div>
            <div class="sub" id="uiWorkoutStatus">No workout planned</div>
          </div>
          <button class="btn" id="btnPlanWorkout">Plan</button>
        </div>

        <div id="workoutEditor" class="workoutEditor hidden">
          <div class="divider"></div>
          <div class="row">
            <button class="btn ghost" id="btnMarkWorkoutComplete">Mark Complete</button>
            <button class="btn primary" id="btnSaveWorkoutLog">Save Workout</button>
          </div>
          <div class="divider"></div>
          <div id="exerciseEditor"></div>
          <div class="row">
            <button class="btn ghost" id="btnAddExercise">Add exercise</button>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">History</div>
            <div class="sub">Recent completed workouts</div>
          </div>
        </div>
        <div id="workoutHistory" class="list"></div>
      </div>
    </section>

    <!-- CALENDAR -->
    <section class="screen" data-screen="calendar" aria-label="Calendar">
      <div class="screenHead">
        <div>
          <div class="h1">Calendar</div>
          <div class="sub">Tap a day to view / plan / close</div>
        </div>
        <div class="row">
          <button class="btn ghost" id="btnCalPrev">‹</button>
          <div class="calTitle" id="uiCalTitle">—</div>
          <button class="btn ghost" id="btnCalNext">›</button>
        </div>
      </div>

      <div class="card">
        <div class="calGrid" id="calGrid"></div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Legend</div>
            <div class="sub">Signals (clean, not noisy)</div>
          </div>
        </div>
        <div class="legend">
          <div class="legItem"><span class="dot dotClosed"></span> Day closed</div>
          <div class="legItem"><span class="dot dotFood"></span> Food logged</div>
          <div class="legItem"><span class="dot dotWo"></span> Workout completed</div>
          <div class="legItem"><span class="dot dotPlanned"></span> Planned</div>
        </div>
      </div>
    </section>

    <!-- ANALYTICS -->
    <section class="screen" data-screen="analytics" aria-label="Analytics">
      <div class="screenHead">
        <div>
          <div class="h1">Analytics</div>
          <div class="sub">Weekly review (signal over noise)</div>
        </div>
        <button class="btn ghost" id="btnExport">Export</button>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">This week</div>
            <div class="sub" id="uiAnalyticsWeek">—</div>
          </div>
        </div>
        <div class="miniGrid">
          <div class="miniCard">
            <div class="miniBig" id="anClosed">—</div>
            <div class="miniSmall">Closed</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="anWorkouts">—</div>
            <div class="miniSmall">Workouts</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="anAvgCals">—</div>
            <div class="miniSmall">Avg cals</div>
          </div>
          <div class="miniCard">
            <div class="miniBig" id="anAvgProtein">—</div>
            <div class="miniSmall">Avg protein</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Weekly weigh-ins</div>
            <div class="sub">One point per week</div>
          </div>
          <button class="btn ghost" id="btnLogWeighIn">Log weigh-in</button>
        </div>
        <div id="weighInList" class="list"></div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Settings</div>
            <div class="sub">Keep it simple</div>
          </div>
          <button class="btn danger ghost" id="btnReset">Reset all data</button>
        </div>

        <div class="formGrid">
          <label class="field">
            <span>Daily calorie target</span>
            <input id="setCals" type="number" inputmode="numeric" step="1" />
          </label>
          <label class="field">
            <span>Daily protein target (g)</span>
            <input id="setProtein" type="number" inputmode="numeric" step="1" />
          </label>
          <label class="field">
            <span>Weigh-in day</span>
            <select id="setWeighDay">
              <option value="0">Sunday</option>
              <option value="1">Monday</option>
              <option value="2">Tuesday</option>
              <option value="3">Wednesday</option>
              <option value="4">Thursday</option>
              <option value="5">Friday</option>
              <option value="6">Saturday</option>
            </select>
          </label>
        </div>

        <div class="row">
          <button class="btn primary" id="btnSaveSettings">Save</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Bottom nav -->
  <nav class="bottomNav" aria-label="Bottom navigation">
    <div class="bottomNavInner">
      <button class="navItem active" data-nav="today" aria-label="Today">
        <span class="navIcon">▦</span><span class="navLabel">Today</span>
      </button>
      <button class="navItem" data-nav="food" aria-label="Food">
        <span class="navIcon">⌁</span><span class="navLabel">Food</span>
      </button>
      <button class="navItem" data-nav="workouts" aria-label="Workouts">
        <span class="navIcon">⟡</span><span class="navLabel">Workouts</span>
      </button>
      <button class="navItem" data-nav="calendar" aria-label="Calendar">
        <span class="navIcon">▣</span><span class="navLabel">Calendar</span>
      </button>
      <button class="navItem" data-nav="analytics" aria-label="Analytics">
        <span class="navIcon">≋</span><span class="navLabel">Stats</span>
      </button>
    </div>
  </nav>

  <!-- Modal (starts hidden) -->
  <div class="modalOverlay hidden" id="modalOverlay" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modalHead">
        <div class="modalTitle" id="modalTitle">Modal</div>
        <button class="iconBtn" id="modalClose" aria-label="Close">✕</button>
      </div>
      <div class="modalBody" id="modalBody"></div>
      <div class="modalFoot" id="modalFoot"></div>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast hidden" id="toast">Updated ✓</div>
</body>
</html>
