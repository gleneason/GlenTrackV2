<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, viewport-fit=cover"
  />
  <title>Glen Track</title>

  <meta name="theme-color" content="#0B1220" />
  <link rel="manifest" href="./manifest.json" />
  <link rel="apple-touch-icon" href="./icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="Glen Track" />

  <!-- Cache-busters: change v= anytime you update -->
  <link rel="stylesheet" href="./app.css?v=20260301" />
  <script defer src="./app.js?v=20260301"></script>
</head>

<body>
  <!-- Toast -->
  <div id="toast" class="toast hidden" role="status" aria-live="polite"></div>

  <!-- Modal -->
  <div id="modalOverlay" class="modalOverlay hidden" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <div class="modalHead">
        <div id="modalTitle" class="modalTitle">Modal</div>
        <button id="modalClose" class="iconBtn" aria-label="Close">‚úï</button>
      </div>
      <div id="modalBody" class="modalBody"></div>
      <div id="modalFoot" class="modalFoot"></div>
    </div>
  </div>

  <!-- ===== Top Bar ===== -->
  <header class="topbar">
    <div class="brand">
      <img class="brandIcon" src="./icon-192.png" alt="GT" />
      <div class="brandText">
        <div class="brandName">Glen Track</div>
        <div class="brandTag">Clean execution. Close the day.</div>
      </div>
    </div>

    <div class="topActions">
      <button class="chip" id="btnPrevDay" aria-label="Previous day">‚Äπ</button>
      <button class="chip chipWide" id="btnPickDay">
        <span id="uiDateLabel">Today</span>
      </button>
      <button class="chip" id="btnNextDay" aria-label="Next day">‚Ä∫</button>
    </div>
  </header>

  <!-- ===== Main ===== -->
  <main class="app">
    <!-- TODAY -->
    <section class="screen active" data-screen="today">
      <div class="card heroCard">
        <div class="heroHead">
          <div>
            <div class="heroTitle">Today</div>
            <div id="uiStatusLine" class="subtle">Status: In Progress</div>
          </div>
          <div id="uiStatusPill" class="statusPill">In Progress</div>
        </div>

        <!-- Rings row: Calories + Protein (no percent text) -->
        <div class="ringsRow" id="macroRingsRow">
          <!-- injected by JS -->
        </div>

        <div class="miniRow">
          <button class="miniBtn" id="btnGoFood">
            <div class="miniK">Food</div>
            <div id="uiFoodSub" class="miniV">Not logged</div>
          </button>
          <button class="miniBtn" id="btnGoWorkouts">
            <div class="miniK">Workout</div>
            <div id="uiWorkoutSub" class="miniV">Not logged</div>
          </button>
          <button class="miniBtn" id="btnQuickLog">
            <div class="miniK">Quick</div>
            <div class="miniV">Log</div>
          </button>
        </div>

        <div class="divider"></div>

        <div class="row spaceBetween">
          <div class="subtle" id="uiCloseHint">Log food or a workout to enable Close Today.</div>
          <button class="btn primary" id="btnCloseDay">Close Today</button>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Week Snapshot</div>
            <div class="subtle">Signals (clean, not noisy)</div>
          </div>
        </div>

        <div class="statGrid">
          <div class="statBox"><div class="statK">Closed</div><div id="uiClosedDays" class="statV">0/7</div></div>
          <div class="statBox"><div class="statK">Workouts</div><div id="uiWorkoutsWeek" class="statV">0</div></div>
          <div class="statBox"><div class="statK">Avg Cals</div><div id="uiAvgCals" class="statV">‚Äî</div></div>
          <div class="statBox"><div class="statK">Avg Protein</div><div id="uiAvgProtein" class="statV">‚Äî</div></div>
          <div class="statBox"><div class="statK">Streak</div><div id="uiStreak" class="statV">0</div></div>
        </div>
      </div>
    </section>

    <!-- FOOD -->
    <section class="screen" data-screen="food">
      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Food</div>
            <div id="uiFoodDateSub" class="subtle">Meals for Today</div>
          </div>
          <div class="row" style="gap:10px;">
            <button class="btn ghost" id="btnCopyPrevDay">Copy yesterday</button>
            <button class="btn" id="btnFoodLibrary">Library</button>
          </div>
        </div>

        <div class="totalsRow">
          <div class="pill">Calories <strong id="uiFoodTotCals">0</strong></div>
          <div class="pill">Protein <strong id="uiFoodTotP">0</strong></div>
          <div class="pill">Carbs <strong id="uiFoodTotC">0</strong></div>
          <div class="pill">Fat <strong id="uiFoodTotF">0</strong></div>
        </div>
      </div>

      <div id="mealList"></div>
    </section>

    <!-- WORKOUTS -->
    <section class="screen" data-screen="workouts">
      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Workouts</div>
            <div id="uiWorkoutDateSub" class="subtle">Plan or log for Today</div>
          </div>
          <div class="row" style="gap:10px;">
            <button class="btn" id="btnTemplates">Templates</button>
            <button class="btn primary" id="btnPlanWorkout">Plan</button>
          </div>
        </div>

        <div class="row spaceBetween">
          <div class="subtle">Status:</div>
          <div id="uiWorkoutStatus" class="pill">No workout planned</div>
        </div>

        <div class="divider"></div>

        <div class="row" style="gap:10px; flex-wrap:wrap;">
          <button class="btn" id="btnAddExercise">Add exercise</button>
          <button class="btn primary" id="btnMarkWorkoutComplete">Mark Complete</button>
          <button class="btn ghost" id="btnSaveWorkoutLog">Save</button>
        </div>

        <div id="workoutEditor" class="hidden"></div>
        <div id="exerciseEditor"></div>

        <div class="divider"></div>
        <div class="h2">History</div>
        <div id="workoutHistory" class="list"></div>
      </div>
    </section>

    <!-- CALENDAR -->
    <section class="screen" data-screen="calendar">
      <div class="card">
        <div class="cardHead">
          <div class="row" style="gap:10px; align-items:center;">
            <button class="iconBtn" id="btnCalPrev" aria-label="Previous month">‚Äπ</button>
            <div id="uiCalTitle" class="h2" style="margin:0;">Month</div>
            <button class="iconBtn" id="btnCalNext" aria-label="Next month">‚Ä∫</button>
          </div>
          <div class="subtle">Tap a day to preview. No bubbles, no heavy borders.</div>
        </div>

        <div class="calWeekHead">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>
        <div id="calGrid" class="calGrid"></div>
      </div>

      <!-- Preview card injected by JS -->
    </section>

    <!-- STATS -->
    <section class="screen" data-screen="analytics">
      <div class="card">
        <div class="cardHead">
          <div>
            <div class="h2">Stats</div>
            <div id="uiAnalyticsWeek" class="subtle">Week</div>
          </div>
          <button class="btn ghost" id="btnLogWeighIn">Log weigh-in</button>
        </div>

        <div class="statGrid">
          <div class="statBox"><div class="statK">Closed days</div><div id="anClosed" class="statV">0</div></div>
          <div class="statBox"><div class="statK">Workouts</div><div id="anWorkouts" class="statV">0</div></div>
          <div class="statBox"><div class="statK">Avg calories</div><div id="anAvgCals" class="statV">‚Äî</div></div>
          <div class="statBox"><div class="statK">Avg protein</div><div id="anAvgProtein" class="statV">‚Äî</div></div>
        </div>

        <div class="divider"></div>

        <div class="h2">Weigh-ins</div>
        <div id="weighInList" class="list"></div>

        <div class="divider"></div>

        <div class="h2">Settings</div>
        <div class="formGrid">
          <label class="field">
            <span>Calorie target</span>
            <input id="setCals" type="number" inputmode="numeric" value="2200" />
          </label>
          <label class="field">
            <span>Protein target (g)</span>
            <input id="setProtein" type="number" inputmode="numeric" value="190" />
          </label>
          <label class="field">
            <span>Weigh-in day (0=Sun ‚Ä¶ 6=Sat)</span>
            <input id="setWeighDay" type="number" inputmode="numeric" value="1" />
          </label>
        </div>

        <div class="row spaceBetween" style="margin-top:12px;">
          <button class="btn danger ghost" id="btnReset">Reset data</button>
          <button class="btn primary" id="btnSaveSettings">Save</button>
        </div>
      </div>
    </section>
  </main>

  <!-- ===== Bottom Nav ===== -->
  <nav class="bottomNav" role="navigation" aria-label="Bottom navigation">
    <button class="navItem active" data-nav="today">
      <span class="navIcon">‚ñ¶</span><span class="navLbl">Today</span>
    </button>
    <button class="navItem" data-nav="food">
      <span class="navIcon">üçΩ</span><span class="navLbl">Food</span>
    </button>
    <button class="navItem" data-nav="workouts">
      <span class="navIcon">üèãÔ∏è</span><span class="navLbl">Workouts</span>
    </button>
    <button class="navItem" data-nav="calendar">
      <span class="navIcon">‚ñ¢</span><span class="navLbl">Calendar</span>
    </button>
    <button class="navItem" data-nav="analytics">
      <span class="navIcon">‚ñ§</span><span class="navLbl">Stats</span>
    </button>
  </nav>
</body>
</html>
